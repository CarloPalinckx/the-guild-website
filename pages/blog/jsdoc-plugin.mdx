
import withArticle from '../../ui/blog/article';

export const meta = {
  title: 'Introducing the new JSDoc plugin',
  author: 'CarloPalinckx',
  tags: ['graphql', 'jsdoc'],
  date: '2018-11-16',
  description:
    'Typesafety from your GrahpQL schema in a typescript-less codebase.',
  image:
    'https://github.com/the-guild-org/oneblog/blob/master/img/704/1*emrpS_BYaLltTGadD6GaIw.png?raw=true',
};

export default withArticle({ ...meta });

With the release of the `@graphql-code-generator/jsdoc` plugin you can generate JSDoc type definitions based on your GraphQL schema. This can help you catch bugs and increases developer experience by gaining auto-completion in your editor. Let's see it in action:

> If you are not familiar with setting up graphql-code-generator yet. Have a look at these docs (link to docs) for more in-depth information on configuration.

To start using this plugin, we first have to install it. Let's add the graphql-codegen dependencies along with the new jsdoc plugin:
```
yarn add -D graphql @graphql-codegen/cli @graphql-codegen/jsdoc
// with npm
npm install --save-dev graphql @graphql-codegen/cli @graphql-codegen/jsdoc
```

Once installed, you can go ahead and stick this in your codegen configuration file
```
generates:
  ./src/types.js:
    plugins:
      - jsdoc
```

> Note that the generated file can be a .js file since you will probably be using it from a js file as well.

Now we are all set up, let's look at how we can generate some types.

First we'll need a schema to interact with, we can do this by either passing a path to a schema file or a url into our config. For this example we'll use the public graphql pokemon api:

```
+ schema: https://graphql-pokemon.now.sh/
generates:
  ./src/types.js:
    plugins:
      - jsdoc
```

Then, we can create a .graphql file that holds our query:

```
query getPokemon($name: String!) {
  pokemon(name: $name) {
    id
    name
    image
  }
}
```

> Note that this version of the jsdoc plugin does not yet generate type definitions specifically for your queries or mutations, but requires at least 1 .graphql file to be present. Hence we add a query file here

All set! Let's run code generator by adding a script to our `package.json` 

```json
{
  "scripts": {
    "generate": "graphql-codegen"
  }
}
```

and then running `yarn generate` âœ¨.

This results in a bunch of generated docblocks that you can import and use to typecheck your javascript code! 
